{
  "version": 3,
  "sources": ["../../vuetify/src/composables/router.tsx"],
  "sourcesContent": ["// Utilities\nimport {\n  computed,\n  nextTick,\n  onScopeDispose, reactive,\n  resolveDynamicComponent,\n  toRef,\n} from 'vue'\nimport { deepEqual, getCurrentInstance, hasEvent, IN_BROWSER, propsFactory } from '@/util'\n\n// Types\nimport type { PropType, Ref, SetupContext } from 'vue'\nimport type {\n  RouterLink as _RouterLink,\n  useLink as _useLink,\n  NavigationGuardNext,\n  RouteLocation,\n  RouteLocationNormalizedLoaded,\n  RouteLocationRaw,\n  Router,\n} from 'vue-router'\nimport type { EventProp } from '@/util'\n\nexport function useRoute (): Ref<RouteLocationNormalizedLoaded | undefined> {\n  const vm = getCurrentInstance('useRoute')\n\n  return computed(() => vm?.proxy?.$route)\n}\n\nexport function useRouter (): Router | undefined {\n  return getCurrentInstance('useRouter')?.proxy?.$router\n}\n\nexport interface LinkProps {\n  href: string | undefined\n  replace: boolean | undefined\n  to: RouteLocationRaw | undefined\n  exact: boolean | undefined\n  disabled: boolean | undefined\n}\n\nexport interface LinkListeners {\n  onClick?: EventProp | undefined\n  onClickOnce?: EventProp | undefined\n}\n\nexport interface UseLink extends Omit<Partial<ReturnType<typeof _useLink>>, 'href'|'route'|'navigate'> {\n  isLink: Readonly<Ref<boolean>>\n  isRouterLink: Readonly<Ref<boolean>>\n  isClickable: Readonly<Ref<boolean>>\n  href: Ref<string | undefined>\n  linkProps: Record<string, string | undefined>\n  route: Readonly<Ref<RouteLocation & { href: string} | undefined>>\n  navigate: Readonly<Ref<ReturnType<typeof _useLink>['navigate'] | undefined>>\n}\n\nexport function useLink (props: LinkProps & LinkListeners, attrs: SetupContext['attrs']): UseLink {\n  const RouterLink = resolveDynamicComponent('RouterLink') as typeof _RouterLink | string\n\n  const isLink = toRef(() => !!(props.href || props.to))\n  const isClickable = computed(() => {\n    return isLink?.value || hasEvent(attrs, 'click') || hasEvent(props, 'click')\n  })\n\n  if (typeof RouterLink === 'string' || !('useLink' in RouterLink)) {\n    const href = toRef(() => props.href)\n    return {\n      isLink,\n      isRouterLink: toRef(() => false),\n      isClickable,\n      href,\n      linkProps: reactive({ href }),\n      route: toRef(() => undefined),\n      navigate: toRef(() => undefined),\n    }\n  }\n\n  // vue-router useLink `to` prop needs to be reactive and useLink will crash if undefined\n  const routerLink = RouterLink.useLink({\n    to: toRef(() => props.to || ''),\n    replace: toRef(() => props.replace),\n  })\n  // Actual link needs to be undefined when to prop is not used\n  const link = computed(() => props.to ? routerLink : undefined)\n  const route = useRoute()\n  const isActive = computed(() => {\n    if (!link.value) return false\n    if (!props.exact) return link.value.isActive?.value ?? false\n    if (!route.value) return link.value.isExactActive?.value ?? false\n\n    return link.value.isExactActive?.value && deepEqual(link.value.route.value.query, route.value.query)\n  })\n  const href = computed(() => props.to ? link.value?.route.value.href : props.href)\n  const isRouterLink = toRef(() => !!props.to)\n\n  return {\n    isLink,\n    isRouterLink,\n    isClickable,\n    isActive,\n    route: toRef(() => link.value?.route.value),\n    navigate: toRef(() => link.value?.navigate),\n    href,\n    linkProps: reactive({\n      href,\n      'aria-current': toRef(() => isActive.value ? 'page' : undefined),\n      'aria-disabled': toRef(() => props.disabled && isLink.value ? 'true' : undefined),\n      tabindex: toRef(() => props.disabled && isLink.value ? '-1' : undefined),\n    }),\n  }\n}\n\nexport const makeRouterProps = propsFactory({\n  href: String,\n  replace: Boolean,\n  to: [String, Object] as PropType<RouteLocationRaw>,\n  exact: Boolean,\n}, 'router')\n\nlet inTransition = false\nexport function useBackButton (router: Router | undefined, cb: (next: NavigationGuardNext) => void) {\n  let popped = false\n  let removeBefore: (() => void) | undefined\n  let removeAfter: (() => void) | undefined\n\n  if (IN_BROWSER && router?.beforeEach) {\n    nextTick(() => {\n      window.addEventListener('popstate', onPopstate)\n      removeBefore = router.beforeEach((to, from, next) => {\n        if (!inTransition) {\n          setTimeout(() => popped ? cb(next) : next())\n        } else {\n          popped ? cb(next) : next()\n        }\n        inTransition = true\n      })\n      removeAfter = router?.afterEach(() => {\n        inTransition = false\n      })\n    })\n    onScopeDispose(() => {\n      window.removeEventListener('popstate', onPopstate)\n      removeBefore?.()\n      removeAfter?.()\n    })\n  }\n\n  function onPopstate (e: PopStateEvent) {\n    if (e.state?.replaced) return\n\n    popped = true\n    setTimeout(() => (popped = false))\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAuBO,SAASA,WAA4D;AAC1E,QAAMC,KAAKC,mBAAmB,UAAU;AAExC,SAAOC,SAAS,MAAA;AA1BlB;AA0BwBF,0CAAIG,UAAJH,mBAAWI;GAAM;AACzC;AAEO,SAASC,YAAiC;AA7BjD;AA8BE,UAAOJ,8BAAmB,WAAW,MAA9BA,mBAAiCE,UAAjCF,mBAAwCK;AACjD;AAyBO,SAASC,QAASC,OAAkCC,OAAuC;AAChG,QAAMC,aAAaC,wBAAwB,YAAY;AAEvD,QAAMC,SAASC,MAAM,MAAM,CAAC,EAAEL,MAAMM,QAAQN,MAAMO,GAAG;AACrD,QAAMC,cAAcd,SAAS,MAAM;AACjC,YAAOU,iCAAQK,UAASC,SAAST,OAAO,OAAO,KAAKS,SAASV,OAAO,OAAO;EAC7E,CAAC;AAED,MAAI,OAAOE,eAAe,YAAY,EAAE,aAAaA,aAAa;AAChE,UAAMI,QAAOD,MAAM,MAAML,MAAMM,IAAI;AACnC,WAAO;MACLF;MACAO,cAAcN,MAAM,MAAM,KAAK;MAC/BG;MACAF,MAAAA;MACAM,WAAWC,SAAS;QAAEP,MAAAA;MAAK,CAAC;MAC5BQ,OAAOT,MAAM,MAAMU,MAAS;MAC5BC,UAAUX,MAAM,MAAMU,MAAS;IACjC;EACF;AAGA,QAAME,aAAaf,WAAWH,QAAQ;IACpCQ,IAAIF,MAAM,MAAML,MAAMO,MAAM,EAAE;IAC9BW,SAASb,MAAM,MAAML,MAAMkB,OAAO;EACpC,CAAC;AAED,QAAMC,OAAOzB,SAAS,MAAMM,MAAMO,KAAKU,aAAaF,MAAS;AAC7D,QAAMD,QAAQvB,SAAS;AACvB,QAAM6B,WAAW1B,SAAS,MAAM;AArFlC;AAsFI,QAAI,CAACyB,KAAKV,MAAO,QAAO;AACxB,QAAI,CAACT,MAAMqB,MAAO,UAAOF,UAAKV,MAAMW,aAAXD,mBAAqBV,UAAS;AACvD,QAAI,CAACK,MAAML,MAAO,UAAOU,UAAKV,MAAMa,kBAAXH,mBAA0BV,UAAS;AAE5D,aAAOU,UAAKV,MAAMa,kBAAXH,mBAA0BV,UAASc,UAAUJ,KAAKV,MAAMK,MAAML,MAAMe,OAAOV,MAAML,MAAMe,KAAK;EACrG,CAAC;AACD,QAAMlB,OAAOZ,SAAS,MAAA;AA5FxB;AA4F8BM,iBAAMO,MAAKY,UAAKV,UAALU,mBAAYL,MAAML,MAAMH,OAAON,MAAMM;GAAI;AAChF,QAAMK,eAAeN,MAAM,MAAM,CAAC,CAACL,MAAMO,EAAE;AAE3C,SAAO;IACLH;IACAO;IACAH;IACAY;IACAN,OAAOT,MAAM,MAAA;AApGjB;AAoGuBc,wBAAKV,UAALU,mBAAYL,MAAML;KAAK;IAC1CO,UAAUX,MAAM,MAAA;AArGpB;AAqG0Bc,wBAAKV,UAALU,mBAAYH;KAAQ;IAC1CV;IACAM,WAAWC,SAAS;MAClBP;MACA,gBAAgBD,MAAM,MAAMe,SAASX,QAAQ,SAASM,MAAS;MAC/D,iBAAiBV,MAAM,MAAML,MAAMyB,YAAYrB,OAAOK,QAAQ,SAASM,MAAS;MAChFW,UAAUrB,MAAM,MAAML,MAAMyB,YAAYrB,OAAOK,QAAQ,OAAOM,MAAS;IACzE,CAAC;EACH;AACF;AAEO,IAAMY,kBAAkBC,aAAa;EAC1CtB,MAAMuB;EACNX,SAASY;EACTvB,IAAI,CAACsB,QAAQE,MAAM;EACnBV,OAAOS;AACT,GAAG,QAAQ;AAEX,IAAIE,eAAe;AACZ,SAASC,cAAeC,QAA4BC,IAAyC;AAClG,MAAIC,SAAS;AACb,MAAIC;AACJ,MAAIC;AAEJ,MAAIC,eAAcL,iCAAQM,aAAY;AACpCC,aAAS,MAAM;AACbC,aAAOC,iBAAiB,YAAYC,UAAU;AAC9CP,qBAAeH,OAAOM,WAAW,CAACjC,IAAIsC,MAAMC,SAAS;AACnD,YAAI,CAACd,cAAc;AACjBe,qBAAW,MAAMX,SAASD,GAAGW,IAAI,IAAIA,KAAK,CAAC;QAC7C,OAAO;AACLV,mBAASD,GAAGW,IAAI,IAAIA,KAAK;QAC3B;AACAd,uBAAe;MACjB,CAAC;AACDM,oBAAcJ,iCAAQc,UAAU,MAAM;AACpChB,uBAAe;MACjB;IACF,CAAC;AACDiB,mBAAe,MAAM;AACnBP,aAAOQ,oBAAoB,YAAYN,UAAU;AACjDP;AACAC;IACF,CAAC;EACH;AAEA,WAASM,WAAYO,GAAkB;AAnJzC;AAoJI,SAAIA,OAAEC,UAAFD,mBAASE,SAAU;AAEvBjB,aAAS;AACTW,eAAW,MAAOX,SAAS,KAAM;EACnC;AACF;",
  "names": ["useRoute", "vm", "getCurrentInstance", "computed", "proxy", "$route", "useRouter", "$router", "useLink", "props", "attrs", "RouterLink", "resolveDynamicComponent", "isLink", "toRef", "href", "to", "isClickable", "value", "hasEvent", "isRouterLink", "linkProps", "reactive", "route", "undefined", "navigate", "routerLink", "replace", "link", "isActive", "exact", "isExactActive", "deepEqual", "query", "disabled", "tabindex", "makeRouterProps", "propsFactory", "String", "Boolean", "Object", "inTransition", "useBackButton", "router", "cb", "popped", "removeBefore", "removeAfter", "IN_BROWSER", "beforeEach", "nextTick", "window", "addEventListener", "onPopstate", "from", "next", "setTimeout", "afterEach", "onScopeDispose", "removeEventListener", "e", "state", "replaced"]
}
